{"version":3,"sources":["../../../src/ngu-modal/ngu-modal.component.ts"],"names":[],"mappings":"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","file":"ngu-modal.component.js","sourceRoot":"","sourcesContent":["import { NguModal } from './ngu-modal.interface';\nimport { Subscription } from 'rxjs/Subscription';\nimport { NguModalService } from './ngu-modal.service';\nimport {\n  Component,\n  OnInit,\n  OnDestroy,\n  ViewChild,\n  ElementRef,\n  Renderer,\n  Input,\n  Output,\n  EventEmitter,\n  HostListener\n} from '@angular/core';\n\n\nexport class NguModalComponent implements OnInit, OnDestroy {\n  modalDiv2: any;\n  modalDiv1: any;\n  overlay: any;\n  modalDiv: any;\n  modalSub: Subscription;\n  openModals: any;\n   MIndex: NguModal;\n   beforestart: EventEmitter<any> = new EventEmitter();\n   afterstart: EventEmitter<any> = new EventEmitter();\n   beforeend: EventEmitter<any> = new EventEmitter();\n   afterend: EventEmitter<any> = new EventEmitter();\n\n   modalMain1: ElementRef;\n   modalInner: ElementRef;\n\n  constructor(\n    private modal: NguModalService,\n    private el: ElementRef,\n    private renderer: Renderer\n  ) { }\n\n  ngOnInit() {\n    this.modalDiv = this.modalMain1.nativeElement;\n    // this.modalDiv1 = this.el.nativeElement.querySelectorAll('.modalTxt')[0];\n    // this.modalDiv2 = this.el.nativeElement.querySelectorAll('.modalTxt1')[0];\n    // this.overlay = this.el.nativeElement.querySelectorAll('.overlay')[0];\n\n    this.MIndex.backdrop = typeof this.MIndex.backdrop !== 'undefined' ? this.MIndex.backdrop : true;\n    // this.renderer.listen(this.modalDiv2, 'click', (event) => {\n    //   if (event.target) {\n    //     console.log('target 1');\n    //   }\n    // });\n    // this.renderer.listen(this.modalDiv1, 'click', (event) => {\n    //   if (event.target) {\n    //     console.log('target 2');\n    //   }\n    // });\n\n\n    const id = this.generateID();\n    this.renderer.setElementClass(this.modalDiv, id, true);\n    const styleItem = document.createElement('style');\n    if (this.MIndex.width && !this.MIndex.width.fixed) {\n      let data = '';\n      data += this.MIndex.width.xs ? `@media (max-width:767px){.${id} .innerdiv {width: ${this.MIndex.width.xs}}}` : '';\n      data += this.MIndex.width.sm ? `@media (min-width:768px){.${id} .innerdiv {width: ${this.MIndex.width.sm}}}` : '';\n      data += this.MIndex.width.md ? `@media (min-width:992px){.${id} .innerdiv {width: ${this.MIndex.width.md}}}` : '';\n      data += this.MIndex.width.lg ? `@media (min-width:1200px){.${id} .innerdiv {width: ${this.MIndex.width.lg}}}` : '';\n\n      styleItem.innerHTML = data;\n    } else {\n      const width = this.MIndex.width ? (this.MIndex.width.fixed || '310px') : '310px';\n      styleItem.innerHTML = `.${id} .innerdiv {width: ${width}; min-width: ${width};}`;\n    }\n    this.modalDiv.appendChild(styleItem);\n\n    this.modalSub = this.modal.isOpened.subscribe(val => {\n      // tslint:disable-next-line:no-unused-expression\n      val.id === this.MIndex.id && this.toggleModal(val.type); val.id === 0 && this.close();\n    });\n  }\n\n  ngOnDestroy() {\n    this.modalSub.unsubscribe();\n  }\n\n\n  private generateID() {\n    let text = '';\n    const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n    for (let i = 0; i < 6; i++) {\n      text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n    return `ngumodal${text}`;\n  }\n\n  close() {\n    this.modal.close(this.MIndex.id);\n  }\n\n  backdrop() {\n    // tslint:disable-next-line:no-unused-expression\n    this.MIndex.backdrop && this.close();\n\n  }\n\n\n  private toggleModal(val: boolean) {\n    const body = document.body.style;\n    // const overlay = this.el.nativeElement.querySelectorAll('.overlay')[0];\n    const modal = this.modalDiv;\n    if (!val) {\n      this.beforeend.emit();\n      this.renderer.setElementClass(modal, 'anim', false);\n      setTimeout(() => {\n        body.cssText = '';\n        this.openModals = val;\n        this.afterend.emit();\n      }, 290);\n    } else {\n      this.beforestart.emit();\n      this.openModals = val;\n      this.renderer.setElementStyle(this.modalInner.nativeElement, 'transfrom', 'scale(.2) translate3d(2241px, 1400px, 0)');\n      setTimeout(() => {\n        body.cssText = 'overflow: hidden; padding-right: 19px;';\n        // this.renderer.setElementStyle(this.modalInner.nativeElement, 'transfrom', '');\n        this.renderer.setElementClass(modal, 'anim', true);\n      }, 2);\n      this.afterstart.emit();\n    }\n  }\n\n\n  confirm(m: number, message?: string) {\n    return new Promise<boolean>(resolve => {\n      return resolve(window.confirm(message || 'Is it OK?'));\n    });\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  // tslint:disable-next-line:component-selector\n  selector: 'ngu-modal',\n  template: `<div #modal class=\"modal\" [class.in]=\"openModals\"><div class=\"main\"><div class=\"innerdiv\"><div #modalInner class=\"innerMain\"><ng-content></ng-content></div></div><div class=\"overlay\" (click)=\"backdrop()\"></div></div></div>`,\n  styles: [`\n    .in {\n      display: table !important;\n    }\n\n    .modal.anim .main .overlay {\n      opacity: 0.48;\n    }\n    .modal.anim .main .innerdiv .innerMain {\n      transform: translateY(0px);\n      opacity: 1;\n    }\n\n    .modal {\n      position: fixed;\n      z-index: 1000;\n      pointer-events: none;\n      top: 0;\n      left: 0;\n      height: 100%;\n      width: 100%;\n      display: none;\n    }\n    .modal .main {\n      display: flex;\n      position: absolute;\n      z-index: 1000;\n      justify-content: center;\n      align-items: center;\n      pointer-events: none;\n      top: 0;\n      left: 0;\n      height: 100%;\n      width: 100%;\n    }\n    .modal .main .innerdiv {\n      z-index: 1000;\n      position: static;\n      pointer-events: auto;\n      top: 0;\n      left: 0;\n      transition: transform 0.3s ease;\n    }\n    .modal .main .innerdiv .innerMain {\n      box-shadow: 0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12);\n      display: block;\n      padding: 24px;\n      border-radius: 2px;\n      box-sizing: border-box;\n      overflow: auto;\n      max-width: 90vw;\n      max-height: 90vh;\n      margin: auto;\n      outline: 0;\n      width: 100%;\n      height: 100%;\n      background: #fff;\n      color: rgba(0, 0, 0, 0.87);\n      transform: translateY(60px);\n      opacity: 0;\n      transition: 0.3s ease all;\n    }\n    .modal .main .overlay {\n      position: absolute;\n      background: rgba(0, 0, 0, 0.4);\n      top: 0;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      opacity: 0;\n      pointer-events: auto;\n      transition: 0.3s ease all;\n    }\n  `]\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: NguModalService, },\n{type: ElementRef, },\n{type: Renderer, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'MIndex': [{ type: Input },],\n'beforestart': [{ type: Output },],\n'afterstart': [{ type: Output },],\n'beforeend': [{ type: Output },],\n'afterend': [{ type: Output },],\n'modalMain1': [{ type: ViewChild, args: ['modal', { read: ElementRef }, ] },],\n'modalInner': [{ type: ViewChild, args: ['modalInner', { read: ElementRef }, ] },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}